{"version":3,"file":"index.min.js","sources":["src/compressImage.js","src/level.js","src/index.js"],"sourcesContent":["function compressImage (imageConfig) {\n  return new Promise(resolve => {\n    const {\n      width,\n      height,\n      quality,\n      src,\n    } = imageConfig;\n    const image = new Image();\n    image.onload = () => {\n      resolve({\n        image,\n        width,\n        height,\n        mimeType: base64MimeType(src),\n        quality,\n      });\n    };\n    if (window.navigator && /(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(window.navigator.userAgent)) {\n      // Fix the `The operation is insecure` error (#57)\n      image.crossOrigin = 'anonymous';\n    }\n    image.src = src;\n  }).then(drawCanvas);\n}\n\nfunction drawCanvas(config) {\n  return new Promise(resolve => {\n    const { image, width, height, mimeType, quality } = config;\n    const canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    const context = canvas.getContext('2d');\n    context.fillStyle = 'transparent';\n    context.fillRect(0, 0, width, height);\n    context.save();\n    context.drawImage(image, 0, 0, width, height);\n    context.restore();\n    if (canvas.toBlob) {\n      canvas.toBlob(blob => {\n        const reader = new FileReader();\n        reader.readAsDataURL(blob);\n        reader.onloadend = function() {\n          resolve(reader.result);\n        }\n      }, mimeType, quality);\n    }\n  });\n}\n\nfunction base64MimeType(encoded) {\n  let result = null;\n  if (typeof encoded !== 'string') {\n    return result;\n  }\n  let mime = encoded.match(/data:([a-zA-Z0-9]+\\/[a-zA-Z0-9-.+]+).*,.*/);\n  if (mime && mime.length) {\n    result = mime[1];\n  }\n  return result;\n}\n\nexport default compressImage;\n","const LEVEL_ENUM = {\n  NONE: 0,\n  ABBR: 1,\n  DUPLICATE: 2,\n  ALL: 3,\n};\n\nexport default {\n  LEVEL_ENUM,\n};\n","/**\n * 参考lottie-compress，压缩包括\n *  数字精度压缩\n *  css属性名压缩\n *  移除默认属性\n *  图片压缩\n *\n */\nimport karas from 'karas';\nimport 'regenerator-runtime';\nimport { cloneDeep } from 'lodash';\n\nimport * as innerCompressImage from './compressImage';\nimport level from './level';\n\nconst { XOM } = karas.reset;\nconst { fullCssProperty, fullAnimate, fullAnimateOption } = karas.abbr;\nconst { LEVEL_ENUM } = level;\n\nfunction equalArr(a, b) {\n  if(a.length !== b.length) {\n    return false;\n  }\n  for(let i = 0, len = a.length; i < len; i++) {\n    let ai = a[i];\n    let bi = b[i];\n    let isArrayA = Array.isArray(ai);\n    let isArrayB = Array.isArray(bi);\n    if(isArrayA && isArrayB) {\n      if(!equalArr(ai, bi)) {\n        return false;\n      }\n    }\n    else if(isArrayA || isArrayB) {\n      return false;\n    }\n    if(ai !== bi) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction equalAnimateValue(a, b) {\n  let keyList = [];\n  let keyHash = {};\n  Object.keys(a).forEach(k => {\n    if(k !== 'offset' && !keyHash.hasOwnProperty(k)) {\n      keyList.push(k);\n      keyHash[k] = true;\n    }\n  });\n  for(let i = 0, len = keyList.length; i < len; i++) {\n    let k = keyList[i];\n    if(b.hasOwnProperty(k)) {\n      let va = a[k];\n      let vb = b[k];\n      if(Array.isArray(va) && Array.isArray(vb)) {\n        if(!equalArr(a, b)) {\n          return false;\n        }\n      }\n      else if(Array.isArray(va) || Array.isArray(vb)) {\n        // 异常情况\n        return false;\n      }\n      else if(va !== vb) {\n        return false;\n      }\n    }\n    else {\n      return false;\n    }\n  }\n  let res = true;\n  Object.keys(b).forEach(k => {\n    if(k !== 'offset' && !keyHash.hasOwnProperty(k)) {\n      res = false;\n    }\n  });\n  return res;\n}\n\nconst numberPrecisionMapper = {\n  offset: 2,\n  duration: 0,\n  delay: 0,\n  endDelay: 0,\n};\n\nclass KarasCompress {\n  constructor(json, options) {\n    let animationJson;\n    if(typeof json === 'string') {\n      try {\n        animationJson = JSON.parse(json);\n      } catch(error) {\n        console.error(error);\n      }\n    }\n    else if(typeof json === 'object') {\n      animationJson = cloneDeep(json);\n    }\n    this.animationJson = animationJson;\n    if(!(this.animationJson && typeof this.animationJson === 'object')) {\n      throw new Error('init compress error');\n    }\n    this.options = {\n      quality: options && options.quality || 0.8,\n      compressImage: options && options.compressImage || innerCompressImage,\n      ...options,\n    };\n  }\n\n  async compress(level, positionPrecision) {\n    if(!this.animationJson || typeof this.animationJson !== 'object' || level === LEVEL_ENUM.NONE) {\n      return this.animationJson;\n    }\n    this.setPositionPrecision(positionPrecision);\n    let imagesPromise = [];\n    this.traverseImage(this.animationJson.children, imagesPromise);\n    await Promise.all(imagesPromise);\n    this.traverseJson(this.animationJson, level);\n    return this.animationJson;\n  }\n\n  setPositionPrecision(value = 0) {\n    ['width', 'height', 'left', 'top'].forEach(key => {\n      numberPrecisionMapper[key] = value;\n    });\n  }\n  traverseImage(children, promiseList) {\n    if(!children || children.length === 0) {\n      return;\n    }\n    children.forEach(item => {\n      if(item.tagName === 'img' && item.props.src) {\n        const quality = this.options.quality;\n        const compressImage = this.options.compressImage;\n        async function asyncCompressImage(item) {\n          item.props.src = await compressImage({\n            width: item.props.style.width,\n            height: item.props.style.height,\n            src: item.props.src,\n            quality,\n          });\n        }\n\n        promiseList.push(asyncCompressImage(item));\n      }\n      else if(item.children && item.children.length > 0) {\n        this.traverseImage(item.children, promiseList);\n      }\n    });\n  }\n\n  traverseJson(item, level) {\n    if(!item) {\n      return;\n    }\n    let { props, animate, children } = item;\n    if(animate) {\n      animate.forEach(animateItem => {\n        let { value, options } = animateItem;\n        Object.keys(options).forEach(item => {\n          if(level === LEVEL_ENUM.ABBR || level === LEVEL_ENUM.ALL) {\n            let shortOptionName = this.compressAnimationOptionName(item);\n            let fixedOptionValue = this.cutNumber(options[item], numberPrecisionMapper[item]);\n            delete options[item];\n            options[shortOptionName] = fixedOptionValue;\n          }\n        });\n        Object.keys(animateItem).forEach(item => {\n          if(level === LEVEL_ENUM.ABBR || level === LEVEL_ENUM.ALL) {\n            let shortName = this.compressAnimateName(item);\n            if(shortName !== item) {\n              animateItem[shortName] = animateItem[item];\n              delete animateItem[item];\n            }\n          }\n        });\n        if(level === LEVEL_ENUM.DUPLICATE || level === LEVEL_ENUM.ALL) {\n          let len = value.length;\n          // 去除重复帧，寻找和当前帧样式相同的帧，当跨度>=3时，删除中间的，当跨度2且总长2时保留1个\n          if(len > 2) {\n            for(let i = 0; i < value.length - 2; i++) {\n              let start = value[i];\n              if(equalAnimateValue(start, value[i + 1])) {\n                if(equalAnimateValue(start, value[i + 2])) {\n                  // 直接和最后相等\n                  if(i + 3 === len) {\n                    value.splice(i + 1, 1);\n                    break;\n                  }\n                  else {\n                    let j = i + 3;\n                    // 找到不相等的那个索引\n                    for(; j < len; j++) {\n                      if(!equalAnimateValue(start, value[j])) {\n                        break;\n                      }\n                    }\n                    // 找到最后都相等没跳出j会等于len\n                    if(j === len) {\n                      j--;\n                    }\n                    value.splice(i + 1, j - i - 1);\n                  }\n                  i += 2;\n                }\n                else {\n                  i++;\n                }\n              }\n            }\n          }\n          len = value.length;\n          // 只有2个时重复可去除一个，多个时上面操作可能会变成只有2个情况\n          if(len === 2) {\n            if(equalAnimateValue(value[0], value[1])) {\n              value.splice(1);\n            }\n          }\n          len = value.length;\n          // 去除首尾offset\n          if(len) {\n            delete value[0].offset;\n            delete value[len - 1].offset;\n          }\n        }\n        value && value.forEach(item => {\n          if (level === LEVEL_ENUM.DUPLICATE || level === LEVEL_ENUM.ALL) {\n            this.removeDuplicatePropertyInFrame(item, props.style);\n          }\n          if(level === LEVEL_ENUM.ABBR || level === LEVEL_ENUM.ALL) {\n            this.compressBezier(item);\n            this.compressCssObject(item, false, true);\n          }\n        });\n      });\n    }\n    if(props) {\n      // 压缩props\n      const canDeleteDefaultProperty = level === LEVEL_ENUM.DUPLICATE || level === LEVEL_ENUM.ALL;\n      const canAbbr = level === LEVEL_ENUM.ABBR || level === LEVEL_ENUM.ALL;\n      this.compressCssObject(props.style, canDeleteDefaultProperty, canAbbr);\n      if(level === LEVEL_ENUM.ABBR || level === LEVEL_ENUM.ALL) {\n        if (props.points) props.points = this.cutNumber(props.points);\n        if (props.controls) props.controls = this.cutNumber(props.controls);\n      }\n    }\n    if(children) {\n      children.forEach(item => {\n        this.traverseJson(item, level);\n      });\n    }\n  }\n\n  compressCssObject(cssObj, canDeleteDefaultProperty = false, canAbbr = false) {\n    if(!cssObj) {\n      return;\n    }\n    Object.keys(cssObj).forEach(propertyName => {\n      if (karas.util.isNil(cssObj[propertyName])) {\n        // 删除空值\n        delete cssObj[propertyName];\n      } else if(canDeleteDefaultProperty && this.checkDefaultProperty(propertyName, cssObj[propertyName])) {\n        // 检查默认值\n        delete cssObj[propertyName];\n      } else if (canAbbr) {\n        let shortPropertyName = this.compressCssPropertyName(propertyName);\n        let fixedPropertyValue = this.cutNumber(cssObj[propertyName], numberPrecisionMapper[propertyName]);\n        delete cssObj[propertyName];\n        cssObj[shortPropertyName] = fixedPropertyValue;\n      }\n    });\n  }\n\n  // 移除每帧中属性\n  // 1. 与style重复，则删除\n  // 2. style没有，判断是否为默认属性值，如果是则删除\n  removeDuplicatePropertyInFrame(frame, style) {\n    if (!frame) return;\n    Object.keys(frame).forEach(propertyName => {\n      if (style && !karas.util.isNil(style[propertyName])) {\n        // style重复\n        if (frame[propertyName] === style[propertyName]) {\n          delete frame[propertyName];\n        }\n      } else {\n        // 判断是否为默认属性值\n        if (this.checkDefaultProperty(propertyName, frame[propertyName])) {\n          delete frame[propertyName];\n        }\n      }\n    });\n  }\n\n  checkDefaultProperty(k, v) {\n    return XOM[k] === v;\n  }\n\n  compressCssPropertyName(propertyName) {\n    const matches = propertyName.match(/^var-(.*)/);\n    if (matches && matches[1]) {\n      return `var-${fullCssProperty[matches[1]] || matches[1]}`;\n    }\n    return fullCssProperty[propertyName] || propertyName;\n  }\n\n  compressAnimateName(itemName) {\n    return fullAnimate[itemName] || itemName;\n  }\n\n  compressAnimationOptionName(optionName) {\n    const matches = optionName.match(/^var-(.*)/);\n    if (matches && matches[1]) {\n      return `var-${fullAnimateOption[matches[1]] || matches[1]}`;\n    }\n    return fullAnimateOption[optionName] || optionName;\n  }\n\n  cutNumber(propertyValue, n) {\n    if(Array.isArray(propertyValue) && propertyValue.length > 0) {\n      // 数组继续递归\n      return propertyValue.map(v => this.cutNumber(v, n));\n    }\n    else if(typeof propertyValue !== 'number') {\n      // 如果不是数字则立即返回原值\n      return propertyValue;\n    }\n    return Number(propertyValue.toFixed(n >= 0 ? n : 4)) || 0;\n  }\n\n  compressBezier(item) {\n    if (!item || !item.easing) return;\n    const matches = item.easing.match(/\\((.*)\\)/);\n    if (matches && matches[1]) {\n      const controls = matches[1].split(',');\n      const fixedControls = controls.map(item => this.cutNumber(item, 3));\n      item.easing = `(${fixedControls.join(',')})`;\n    }\n  }\n}\n\nKarasCompress.LEVEL = LEVEL_ENUM;\nexport default KarasCompress;\n\n\n\n\n\n"],"names":["compressImage","imageConfig","Promise","resolve","width","height","quality","src","image","Image","onload","mimeType","base64MimeType","window","navigator","test","userAgent","crossOrigin","then","drawCanvas","config","canvas","document","createElement","context","getContext","fillStyle","fillRect","save","drawImage","restore","toBlob","blob","reader","FileReader","readAsDataURL","onloadend","result","encoded","mime","match","length","LEVEL_ENUM","NONE","ABBR","DUPLICATE","ALL","XOM","karas","reset","abbr","fullCssProperty","fullAnimate","fullAnimateOption","level","equalArr","a","b","i","len","ai","bi","isArrayA","Array","isArray","isArrayB","equalAnimateValue","keyList","keyHash","Object","keys","forEach","k","hasOwnProperty","push","va","vb","res","numberPrecisionMapper","offset","duration","delay","endDelay","KarasCompress","json","options","animationJson","JSON","parse","error","console","_typeof","cloneDeep","this","Error","innerCompressImage","positionPrecision","setPositionPrecision","imagesPromise","traverseImage","children","all","traverseJson","value","key","promiseList","item","tagName","props","asyncCompressImage","style","_this","animate","animateItem","shortOptionName","_this2","compressAnimationOptionName","fixedOptionValue","cutNumber","shortName","compressAnimateName","start","splice","j","removeDuplicatePropertyInFrame","compressBezier","compressCssObject","canDeleteDefaultProperty","canAbbr","points","controls","cssObj","propertyName","util","isNil","_this3","checkDefaultProperty","shortPropertyName","compressCssPropertyName","fixedPropertyValue","frame","_this4","v","matches","itemName","optionName","propertyValue","n","map","_this5","Number","toFixed","easing","fixedControls","split","_this6","join","LEVEL"],"mappings":"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"}